<!DOCTYPE html>
<html>

<head>
    <title>Databases week 1</title>
    <meta charset="utf-8">
    <style>
        body {
            font-family: sans-serif;
        }

        h1,
        h2,
        h3 {
            font-weight: normal;
        }

        .db-table {
            width: 100%;
        }

        .db-table, .db-table th, .db-table td {
            border: 1px solid black;
        }

        .remark-code,
        .remark-inline-code {
            font-family: monospace;
        }
    </style>
</head>

<body>
    <textarea id="source">

class: center, middle

# Databases Week 1

---

class: center, middle

# What is a database?

---

class: center, middle

# Information

---

class: center, middle

# Structured information

---

class: center, middle

# Information storage
# Information access

---

class: middle

# A database in javascript

Information storage:

```js
const musicians = [
  "John Coltrane",
  "Miles David",
  "Thelonious Monk",
  "Sonny Rollins"];
```

Storing new information:
```js
musicians.push("Steve Lehman");
```

Information access:
```js
console.log(musicians[0]); // 'John Coltrane'
```

---

# Structured information (1): facts

`frank likes programming`

<br/>

`frank`: **subject**

*who or what this statement is about*

<br/>

`likes`: **relation**

*the kind of relation the subject and object have*

<br/>

`programming`: **object**

*who or what the subject relates to*

---

# Structured information (2): relations

```
frank likes programming
programming is fun
```

There are three relations in this database.

---

# Relational databases: Tables

A relational database stores information in tables consisting of rows and columns.

A table stores information structured in such a way that each row is a
**subject**, each column is a **relation** and each cell is an **object**. 

<table class="db-table">
    <tr>
        <th>FirstName</th>
        <th>LastName</th>
        <th>Born</th>
    </tr>
    <tr>
        <td>Thelonious</td>
        <td>Monk</td>
        <td>1917</td>
    </tr>
    <tr>
        <td>Sonny</td>
        <td>Rollins</td>
        <td>1930</td>
    </tr>
    <tr>
        <td>Steve</td>
        <td>Lehman</td>
        <td>1978</td>
    </tr>
</table>

---

# Relational databases: relating tables (1)

What happens if we want to store the instruments the musicians play(ed)?

<table class="db-table">
    <tr>
        <th>FirstName</th>
        <th>LastName</th>
        <th>Born</th>
        <th>Instruments</th>
    </tr>
    <tr>
        <td>Thelonious</td>
        <td>Monk</td>
        <td>1917</td>
        <td>Piano</td>
    </tr>
    <tr>
        <td>Sonny</td>
        <td>Rollins</td>
        <td>1930</td>
        <td>Tenor saxophone, Soprano saxophone</td>
    </tr>
    <tr>
        <td>Steve</td>
        <td>Lehman</td>
        <td>1978</td>
        <td>Alto saxophone</td>
    </tr>
</table>

---

# Relational databases: relating tables (2)

Now with a solution that's more structured.

<table class="db-table">
    <tr>
        <th>FirstName</th>
        <th>LastName</th>
        <th>Born</th>
        <th>Instruments</th>
    </tr>
    <tr>
        <td>Thelonious</td>
        <td>Monk</td>
        <td>1917</td>
        <td>Piano</td>
    </tr>
    <tr>
        <td>Sonny</td>
        <td>Rollins</td>
        <td>1930</td>
        <td>Tenor saxophone</td>
    </tr>
    <tr>
        <td>Sonny</td>
        <td>Rollins</td>
        <td>1930</td>
        <td>Soprano saxophone</td>
    </tr>
    <tr>
        <td>Steve</td>
        <td>Lehman</td>
        <td>1978</td>
        <td>Alto saxophone</td>
    </tr>
</table>

---

# Relational databases: relating tables

<table class="db-table">
    <tr>
        <th>Musicians</th>
    </tr>
    <tr>
        <th>FirstName</th>
        <th>LastName</th>
        <th>Born</th>
    </tr>
    <tr>
        <td>Thelonious</td>
        <td>Monk</td>
        <td>1917</td>
    </tr>
    <tr>
        <td>Sonny</td>
        <td>Rollins</td>
        <td>1930</td>
    </tr>
    <tr>
        <td>Steve</td>
        <td>Lehman</td>
        <td>1978</td>
    </tr>
</table>

<br/>

<table class="db-table">
    <tr>
        <th>InstrumentsPlayed</th>
    </tr>
    <tr>
        <th>Musician</th>
        <th>Instrument</th>
    </tr>
    <tr>
        <td>Thelonious Monk</td>
        <td>Piano</td>
    </tr>
    <tr>
        <td>Sonny Rollins</td>
        <td>Tenor Saxophone</td>
    </tr>
    <tr>
        <td>Sonny Rollins</td>
        <td>Soprano Saxophone</td>
    </tr>
    <tr>
        <td>Steve Lehman</td>
        <td>Alto-saxophone</td>
    </tr>
</table>

---

class: middle, center

# Identity

![Thelonious Monk](media/thelonious-monk.jpg)

---

# Identity: identifying a subject

We want to refer to specific subjects.

We can use an **id** column for that.

<table class="db-table">
    <tr>
        <th>Musicians</th>
    </tr>
    <tr>
        <th>Id</th>
        <th>FirstName</th>
        <th>LastName</th>
        <th>Born</th>
    </tr>
    <tr>
        <td>TheloniousMonk</td>
        <td>Thelonious</td>
        <td>Monk</td>
        <td>1917</td>
    </tr>
    <tr>
        <td>SonnyRollins</td>
        <td>Sonny</td>
        <td>Rollins</td>
        <td>1930</td>
    </tr>
    <tr>
        <td>SteveLehman</td>
        <td>Steve</td>
        <td>Lehman</td>
        <td>1978</td>
    </tr>
</table>

---

# Identity: uniqueness (1)

To refer to specific subjects ids have to be
unique throughout the whole table.

<table class="db-table">
    <tr>
        <th>Musicians</th>
    </tr>
    <tr>
        <th>Id</th>
        <th>FirstName</th>
        <th>LastName</th>
        <th>Born</th>
    </tr>
    <tr>
        <td>TheloniousMonk</td>
        <td>Thelonious</td>
        <td>Monk</td>
        <td>1917</td>
    </tr>
    <tr>
        <td>TheloniousMonk2</td>
        <td>Thelonious</td>
        <td>Monk</td>
        <td>1950</td>
    </tr>
</table>

We usually refer to subjects with a number.
This is useful because we can easily guarantee uniqueness.

<table class="db-table">
    <tr>
        <th>Musicians</th>
    </tr>
    <tr>
        <th>Id</th>
        <th>FirstName</th>
        <th>LastName</th>
        <th>Born</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Thelonious</td>
        <td>Monk</td>
        <td>1917</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Thelonious</td>
        <td>Monk</td>
        <td>1950</td>
    </tr>
</table>

---

# Identity: uniqueness (2)

Ids sometimes need to be unique outside of tables too.
For example when communicating with other systems. 

![ISBN](media/isbn.png)
<br/>

![QR-code](media/qrcode.png "QR-code")
<br/>

`15932a21-145f-407d-94cc-0baf2ca38608`
<br/>

---

# Relating tables with ids

<table class="db-table">
    <tr>
        <th>Musicians</th>
    </tr>
    <tr>
        <th>Id</th>
        <th>FirstName</th>
        <th>LastName</th>
        <th>Born</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Thelonious</td>
        <td>Monk</td>
        <td>1917</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Sonny</td>
        <td>Rollins</td>
        <td>1930</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Steve</td>
        <td>Lehman</td>
        <td>1978</td>
    </tr>
</table>

<br/>

<table class="db-table">
    <tr>
        <th>InstrumentsPlayed</th>
    </tr>
    <tr>
        <th>Id</th>
        <th>Musician</th>
        <th>Instrument</th>
    </tr>
    <tr>
        <td>1</td>
        <td>1</td>
        <td>Piano</td>
    </tr>
    <tr>
        <td>2</td>
        <td>2</td>
        <td>Tenor Saxophone</td>
    </tr>
    <tr>
        <td>3</td>
        <td>2</td>
        <td>Soprano Saxophone</td>
    </tr>
    <tr>
        <td>4</td>
        <td>3</td>
        <td>Alto-saxophone</td>
    </tr>
</table>

The **Id** columns are the table's **primary key**

The **Musician** column is a **foreign key**


---

class: middle, center

# Accessing information with queries

---

# Queries

Now that we structured our information what can we do with it?

We can ask the database questions using a query language!

---

# A query language: SQL (1)

```sql
SELECT FirstName
FROM Musicians;
```

```
+------------+
| FirstName  |
+------------+
| Thelonious |
| Sonny      |
| Steve      |
+------------+
3 rows in set (0.00 sec)
```

---

# A query language: SQL (2)

```sql
SELECT *
FROM Musicians
WHERE FirstName = 'Thelonious'
```

```
+----+------------+----------+------+
| Id | FirstName  | LastName | Born |
+----+------------+----------+------+
|  1 | Thelonious | Monk     | 1917 |
+----+------------+----------+------+
1 row in set (0.00 sec)
```

---

class: center, middle

# More relationships

---

# Many-to-many relationship

How do we model which instruments the muscians played?

<table class="db-table">
    <tr>
        <th>Musicians</th>
    </tr>
    <tr>
        <th>Id</th>
        <th>FirstName</th>
        <th>LastName</th>
        <th>Born</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Thelonious</td>
        <td>Monk</td>
        <td>1917</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Sonny</td>
        <td>Rollins</td>
        <td>1930</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Steve</td>
        <td>Lehman</td>
        <td>1978</td>
    </tr>
</table>

<br/>

<table class="db-table">
    <tr>
        <th>Instruments</th>
    </tr>
    <tr>
        <th>Id</th>
        <th>Name</th>
        <th>Type</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Piano</td>
        <td>Key</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Tenor Saxophone</td>
        <td>Wind</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Soprano Saxophone</td>
        <td>Wind</td>
    </tr>
    <tr>
        <td>4</td>
        <td>Alto-saxophone</td>
        <td>Wind</td>
    </tr>
    <tr>
        <td>5</td>
        <td>Guitar</td>
        <td>String</td>
    </tr>
</table>

---

class: center, middle

# Answer: with another table!

<table class="db-table">
    <tr>
        <th>InstrumentsPlayed</th>
    </tr>
    <tr>
        <th>Id</th>
        <th>Musician</th>
        <th>Instrument</th>
    </tr>
    <tr>
        <td>1</td>
        <td>1</td>
        <td>1</td>
    </tr>
    <tr>
        <td>2</td>
        <td>2</td>
        <td>2</td>
    </tr>
    <tr>
        <td>2</td>
        <td>2</td>
        <td>3</td>
    </tr>
    <tr>
        <td>3</td>
        <td>3</td>
        <td>4</td>
    </tr>
</table>

    </textarea>
    <script src="js/remark.js">
    </script>
    <script>
        var slideshow = remark.create();
    </script>
</body>

</html>